进程和线程的区别

进程大于线程，进程之间是相互独立的，运行在独立的内存区的

进程可以包含多个线程



```
ThreadPoolExecutor(int corePoolSize,
                              int maximumPoolSize,
                              long keepAliveTime,
                              TimeUnit unit,
                              BlockingQueue<Runnable> workQueue,
                              ThreadFactory threadFactory,
                              RejectedExecutionHandler handler)
```

Corepoolsize:核心线程数量，这些线程不会被回收，线程池创建的时候就会创建这个数量的线程

maximumPoolSize: 线程最大值

keepAliveTime:线程被回收的时间

TimeUnit:线程被回收的时间单位

workQueue: 阻塞队列，当线程过多的时候，会被放入这个队列中等待执行

ThreadFactory：线程创建的工厂，可以自定义实现创建线程，可以在线程执行前后加入自己的逻辑

RejectedExecutionHandler：拒绝策略，当阻塞队列已经存不下去的时候，是执行什么拒绝策略

拒绝策略如下：

![image-20210803103347952](/Users/yanzhe/android/知识整理/多线程/image/image-20210803103347952.png)



原子性操作指得是不能被拆分的一段代码

如下就不是

```
x++
其实是
int temp = x + 1 
x = temp
这是俩步操作
不是原子性操作
添加synchronized
使你的方法里面的内容变量具有同步性
同一时间只有一个线程能调用到这个方法
```



## volatile

让你的变量直接从主存中获取
每个线程都会有自己的内存空间
在主存中定义的一个变量，线程运行的时候，都会将这个变量拷贝到自己的线程，执行完成操作之后，在放回主存
这个时候，如果有多个线程在操作这个变量的话，那这个变量就会出现线程不安全，达不到想要的结果
